<!DOCTYPE html>
<html lang="zh-cn">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<link rel="icon" href="../../../img/cisco.svg"/>
	<title>思科-ISE 3.1</title>
	<script type="text/javascript" src="../../../js/head.js"></script>
	<script type="text/javascript">
		window.onload = createNavigation(ise31);
	</script>
</head>
<body>
	<div class="container-fluid">
		<div id="divCommand">
			<script type="text/javascript">
				createInstruT0("安装&初始化", "i15");
						createInstruT2("选择 ‘1。，安装低层Linux");
							createConfigImgT2("ISE31/i15$1");

						createInstruT2("直接输入 ‘setup。，进入初始化向导");
							createConfigImgT2("ISE31/i15$2");

						createInstruT2("根据向导初始化，配置完成后开始安装ISE");
							createConfigImgT2("ISE31/i15$3");

				createInstruT0("建议开局配置", "i1");
					createInstruT1("适当取消密码限制策略", "i1-1");
						// createConfigImgT1("ISE31/i0");
						createConfigImgT1("ISE31/i1_1$1~2");

					createInstruT1("取消异常客户端挂起功能", "i1-2");
						createConfigImgT1("ISE31/i1_2$1~2");

				createInstruT0("ISE分布式部署", "i2");
					createInstruT1("需要提前为所有节点申请证书，DNS除了配置正向解析外，‘还需要反向解析。", "i2-3");

					createInstruT1("部署主节点", "i2-1");
						// createConfigImgT1("ISE31/i0");
						createConfigImgT1("ISE31/i2_1$1~4");

					createInstruT1("添加其它节点", "i2-2");
						createConfigImgT1("ISE31/i2_2$1~5");

				createInstruT0("域与证书的配置", "i3");
					createInstruT1("加入域", "i3-1");
						// createConfigImgT1("ISE31/i0");
						createConfigImgT1("ISE31/i3_1$1~7");

					createInstruT1("根据需要从域中提取信息", "i3-2");
						createInstruAllTopT1("提取组");
						createConfigImgT1("ISE31/i3_2$1~3");

					createInstruT1("导入根证书", "i3-5");
						// createConfigImgT1("ISE31/i0");
						createConfigImgT1("ISE31/i3_5$1~3");

					createInstruT1("ISE申请个人证书", "i3-3");
						// createConfigImgT1("ISE31/i0");
						createConfigImgT1("ISE31/i3_3$1~4");

					createInstruT1("导入个人证书", "i3-4");
						createConfigImgT1("ISE31/i3_4$1~2");

				createInstruT0("NAD（Network Access Device）配置", "i4");
					createInstruT1("NDG（Network Device Groups）配置", "i4-1");
						// createConfigImgT1("ISE31/i0");
						createConfigImgT1("ISE31/i4_1$1~4");

					createInstruT1("ND（Network Device）配置", "i4-2");
						// createConfigImgT1("ISE31/i0");
						createConfigImgT1("ISE31/i4_2$1~4");

					createInstruT1("ND配置（Radius over DTLS）", "i4-3");
						createInstruAllTopT1("需要提前准备好DTLS所用证书，ND的其它配置与普通radius相同（无需预共享密匙）");
						createConfigImgT1("ISE31/i4_3$1");
						// createConfigImgT1("ISE31/i0");
						createConfigImgT1("ISE31/i1_2$1");
						createConfigImgT1("ISE31/i4_3$2");

				createInstruT0("ISE策略结构", "i7");
					createInstruT1("策略集结构", "i7-1");
						// createConfigImgT1("ISE31/i0");
						createConfigImgT1("ISE31/i7_1$1~6");

					createInstruT1("配置条件", "i7-2");
						createInstruT2("配置时间条件", "i7-2-1");
							createConfigImgT2("ISE31/i0");
							createConfigImgT2("ISE31/i7_2_1$1~4");

						createInstruT2("配置复合条件", "i7-2-2");
							createConfigImgT2("ISE31/i0");
							createConfigImgT2("ISE31/i7_2_1$1");
							createConfigImgT2("ISE31/i7_2_2$1~8");

					createInstruT1("配置允许的协议", "i7-3");
						// createConfigImgT1("ISE31/i0");
						createConfigImgT1("ISE31/i7_3$1~3");

					createInstruT1("配置认证数据库（身份源序列）", "i7-4");
						// createConfigImgT1("ISE31/i0");
						createConfigImgT1("ISE31/i7_4$1~4");

					createInstruT1("配置内部用户（组）", "i7-5");
						createInstruT2("配置内部用户组", "i7-5-1");
							createConfigImgT2("ISE31/i0");
							createConfigImgT2("ISE31/i7_5_1$1~4");

						createInstruT2("配置内部用户", "i7-5-2");
							createConfigImgT2("ISE31/i0");
							createConfigImgT2("ISE31/i7_5_2$1~3");

					createInstruT1("配置内部终端（组）", "i7-6");
						createInstruT2("配置内部终端组", "i7-6-1");
							createConfigImgT2("ISE31/i0");
							createConfigImgT2("ISE31/i7_5_1$1");
							createConfigImgT2("ISE31/i7_6_1$1~3");

						createInstruT2("配置内部终端（全新未识别）", "i7-6-2");
							createConfigImgT2("ISE31/i0");
							createConfigImgT2("ISE31/i7_6_2$1~4");

					createInstruT1("配置Download ACL", "i7-7");
						// createConfigImgT1("ISE31/i0");
						createConfigImgT1("ISE31/i7_3$1");
						createConfigImgT1("ISE31/i7_7$1~3");

					createInstruT1("配置授权结果", "i7-8");
						// createConfigImgT1("ISE31/i0");
						createConfigImgT1("ISE31/i7_3$1");
						createConfigImgT1("ISE31/i7_8$1~3");

				createInstruT0("MAB", "i8");
					createInstruAllTopT0("打印机配置MAB：");
					createInstruAllTopT0("　　将打印机的MAC地址存入内部终端组printer");
					createInstruAllTopT0("　　将打印机授权进对应vlan，只允许访问本vlan的子网<br />");

					createConfigImgT1("ISE31/i8$1~7");


				createInstruT0("EasyConnect & Passive ID", "i9");
					createInstruT1("启用Passive ID功能", "i9-1");
						// createConfigImgT1("ISE31/i0");
						createConfigImgT1("ISE31/i2_1$1");
						createConfigImgT1("ISE31/i9_1$1~2");
						createConfigImgT1("ISE31/i3_1$1");
						createConfigImgT1("ISE31/i9_1$3~11");

					createInstruT1("创建终端组，存储设备mac地址", "i9-2");
						createConfigImgT1("ISE31/i9_2$1");

					createInstruT1("配置登录域前授权的结果", "i9-3");
						createInstruT2("配置受限制的DACL（除基本流量外，只放行去往域控的流量）", "i9-3-1");
							createInstruAllTopT2("“10.1.100.200。为域控地址");
							let cmd = `
								permit icmp any any
								permit udp any any eq 53
								permit udp any eq 68 any eq 67
								permit ip any host 10.1.100.200
								deny ip any any
							`;
							createLinuxTxtT2(cmd);
							createConfigImgT2("ISE31/i9_3_1$1");

						createInstruT2("配置受限制的授权结果", "i9-3-2");
							createConfigImgT2("ISE31/i9_3_2$1");

					createInstruT1("配置登录域后的授权结果", "i9-4");
						createConfigImgT1("ISE31/i9_4$1");

					createInstruT1("配置授权策略", "i9-5");
						createInstruAllTopT1("需要登录域前、登录域后两条策略，登录域后的策略优先");
						createInstruAllTopT1("登录域前策略的条件：‘有线MAB。 && ‘mac地址属于对应的组。");
						createInstruAllTopT1("登录域后策略的条件：‘有线MAB。 && ‘EasyConnect。 && ‘域账号属于对应的域中的组。");
						createConfigImgT1("ISE31/i9_5$1~2");

				createInstruT0("802.1x", "i10");
					createInstruT1("PEAP", "i10-1");
						createInstruT2("PEAP的适用条件 —— <span style='color: #FFFFFF'>‘Network Access。　”:。　‘EapTunnel。　EQUALS　‘PEAP。</span>", "i10-1-1");
							createConfigImgT2("ISE31/i10_1_1$1");

						createInstruT2("PEAP实例", "i10-1-2");
							createConfigImgT2("ISE31/i10_1_2$1~2");

						createInstruT2("PEAP的条件：通过机器认证 —— <span style='color: #FFFFFF'>‘Network Access。　”:。　‘WasMachineAuthenticated。　EQUALS　‘True。</span>", "i10-1-3");
							createConfigImgT2("ISE31/i10_1_3$1~2");

					createInstruT1("EAP-TLS", "i10-2");
						createInstruT2("配置证书认证的配置文件", "i10-2-1");
							createConfigImgT2("ISE31/i0");
							createConfigImgT2("ISE31/i3_1$1");
							createConfigImgT2("ISE31/i10_2_1$1~2");

						createInstruT2("EAP-TLS的适用条件 —— <span style='color: #FFFFFF'>‘Network Access。　”:。　‘EapAuthentication。　EQUALS　‘EAP-TLS。</span>", "i10-2-2");
							createConfigImgT2("ISE31/i10_2_2$1");

						createInstruT2("EAP-TLS实例", "i10-2-3");
							createConfigImgT2("ISE31/i10_2_3$1");
							createConfigImgT2("ISE31/i10_1_2$2");

					createInstruT1("EAP-FAST", "i10-3");
						createInstruT2("EAP-FAST的适用条件 —— <span style='color: #FFFFFF'>‘Network Access。　”:。　‘EapTunnel。　EQUALS　‘EAP-FAST。</span>", "i10-3-1");
							createConfigImgT2("ISE31/i10_3_1$1");

						createInstruT2("EAP-FAST实例", "i10-3-2");
							createConfigImgT2("ISE31/i10_3_2$1");
							createConfigImgT2("ISE31/i10_1_2$2");

					// createInstruT1("windows终端配置", "i10-4");
					// 	createInstruT2("启用802.1x功能", "i10-4-1");
					// 		createInstruAllTopT2("有线连接时，对应服务默认关闭，需要手工打开，无线可直接连接，相关配置逻辑相同");
					// 		createInstruAllTopT2("使用 ‘services.msc。 配置服务，对应服务名为 ‘Wired AutoConfig。");
					// 		createConfigImgT2("ISE31/i10_4_1$1~3");
					//
					// 	createInstruT2("802.1x认证相关配置", "i10-4-2");
					// 		createConfigImgT2("ISE31/i10_4_2$1~2");


				createInstruT0("中心网页认证（认证网页位于ISE）", "i11");
					createInstruT1("调整页面配置", "i11-1");
						// createConfigImgT1("ISE31/i0");
						createConfigImgT1("ISE31/i11_1$1~3");

					createInstruT1("配置认证前的DACL（放行基本流量及准入控制流量）", "i11-2");
						createInstruAllTopT1("“10.1.20.241。为ISE地址");
						cmd = `
							permit udp any any eq 53
							permit icmp any any
							permit tcp any any eq 80
							permit tcp any any eq 443
							permit tcp any host 10.1.20.241 eq 8443
							permit tcp any host 10.1.20.241 eq 8905
							permit tcp any host 10.1.20.241 eq 8909
							permit udp any host 10.1.20.241 eq 8905
							permit udp any host 10.1.20.241 eq 8906
							permit udp any host 10.1.20.241 eq 8909
						`;
						createNetworkTxtMarkT1(cmd);
						createConfigImgT1("ISE31/i11_2$1");

					createInstruT1("配置认证前的授权结果", "i11-3");
						createConfigImgT1("ISE31/i11_3$1");

					createInstruT1("配置认证前的授权结果", "i11-4");
						createInstruAllTopT1("认证后授权结果无特殊属性，常规配置即可<br /><br />");

					createInstruT1("配置策略集", "i11-5");
						createInstruT2("策略集条件： ‘有线MAB。，允许的协议为默认的 ‘Default Network Access。 即可");
							createInstruAllTopT2("配置以有线为例，无线与有线基本一致，条件为无线MAB，设备类条件根据实际配置");
							createConfigImgT2("ISE31/i11_5_1$1");

						createInstruT2("认证策略：使用 ‘内部终端。 为身份源");
							createInstruAllTopT2("由于新加入的设备的mac地址不一定能及时存放到内部终端中，当 ‘未找到时，则继续。");
							createConfigImgT2("ISE31/i11_5_2$1");

						createInstruT2("授权策略：配置合适的身份源为授权条件，‘通过认证的授权结果。作为授权结果");
							createInstruAllTopT2("默认的授权策略：‘未通过认证的授权结果。作为授权结果");
							createConfigImgT2("ISE31/i11_5_3$1");

				createInstruT0("Guest Service", "i12");
					createInstruT1("配置身份源序列", "i12-1");
						createInstruT2("登录访客门户的身份源", "i12-1-1");
							createConfigImgT2("ISE31/i0");
							createConfigImgT2("ISE31/i7_4$1~2");
							createConfigImgT2("ISE31/i12_1_1$1");

						createInstruT2("登录赞助商门户的身份源", "i12-1-2");
							createConfigImgT2("ISE31/i12_1_2$1");

					createInstruT1("配置访客的地区（时区）", "i12-2");
						// createConfigImgT1("ISE31/i0");
						createConfigImgT1("ISE31/i12_2$1~3");

					createInstruT1("自定义访客策略（访问时间）", "i12-3");
						// createConfigImgT1("ISE31/i0");
						createConfigImgT1("ISE31/i11_1$1");
						createConfigImgT1("ISE31/i12_3$1~2");

					createInstruT1("配置访客门户", "i12-4");
						// createConfigImgT1("ISE31/i0");
						createConfigImgT1("ISE31/i11_1$1~2");
						createConfigImgT1("ISE31/i12_4$1");

					createInstruT1("配置赞助商门户", "i12-5");
						// createConfigImgT1("ISE31/i0");
						createConfigImgT1("ISE31/i11_1$1");
						createConfigImgT1("ISE31/i12_5$1~2");

					createInstruT1("配置赞助商策略", "i12-6");
						createConfigImgT1("ISE31/i12_6$1~2");

					createInstruT1("配置授权结果", "i12-7");
						createInstruT2("注册认证前授权", "i12-7-1");
							createInstruAllTopT2("“10.1.20.241。为ISE地址，放行基本流量及准入控制流量");
							cmd = `
								permit udp any any eq 53
								permit icmp any any
								permit tcp any any eq 80
								permit tcp any any eq 443
								permit tcp any host 10.1.20.241 eq 8443
								permit tcp any host 10.1.20.241 eq 8905
								permit tcp any host 10.1.20.241 eq 8909
								permit udp any host 10.1.20.241 eq 8905
								permit udp any host 10.1.20.241 eq 8906
								permit udp any host 10.1.20.241 eq 8909
							`;
							createNetworkTxtMarkT2(cmd);
							createConfigImgT2("ISE31/i11_2$1");
							createConfigImgT2("ISE31/i11_3$1");

						createInstruT2("认证后授权", "i12-7-2");
							createInstruAllTopT2("认证后授权结果无特殊属性，常规配置即可<br /><br />");

					createInstruT1("配置策略集", "i12-8");
						createInstruT2("策略集条件： ‘有线MAB。 或 ‘无线MAB。，允许的协议为默认的 ‘Default Network Access。 即可");
							createConfigImgT2("ISE31/i12_8$1");

						createInstruT2("认证策略：使用 ‘内部终端。 为身份源");
						createInstruT2("由于新加入的设备的mac地址不一定能及时存放到内部终端中，当 ‘未找到时，则继续。");
							createConfigImgT2("ISE31/i12_8$2");

						createInstruT2("授权策略：配置访问类型为授权条件，‘通过认证的授权结果。作为授权结果");
						createInstruT2("默认的授权策略：‘未通过认证的授权结果。作为授权结果");
						createInstruT2("授权的适用条件 —— <span style='color: #FFFFFF'>‘IdentityGroup。　”:。　‘Name。　EQUALS　‘User Identity Groups:GuestType_guest_8_hours。</span>", "i10-1-1");

							createConfigImgT2("ISE31/i12_8$3~4");

				// createInstruT0("设备识别", "i13");
				// 	createInstruT1("启用设备识别功能", "i13-1");
				// 		createConfigImgT1("ISE31/i13_1$1~6");
				//
				// 	createInstruT1("启用重认证功能", "i13-2");
				// 		createConfigImgT1("ISE31/i13_2$1~2");
				//
				// 	createInstruT1("自定义条件", "i13-3");
				// 		createConfigImgT1("ISE31/i13_3$1~3");
				//
				// 	createInstruT1("自定义规则", "i13-4");
				// 		createConfigImgT1("ISE31/i13_4$1~3");
				//
				// 	createInstruT1("查看识别结果", "i13-5");
				// 		createConfigImgT1("ISE31/i13_5$1~2");

				createInstruT0("MACSec", "i14");
					createInstruT1("配置授权结果", "i14-1");
						createConfigImgT1("ISE31/i14_1$1");

					createInstruT1("配置策略集", "i14-2");
						createInstruAllTopT1("终端使用MACSec接入需要使用AnyConnect，协议选用EAP-FAST");
						createInstruAllTopT1("策略集配置方式与普通802.1x相同");
						createConfigImgT1("ISE31/i14_2$1~2");

				createInstruT0("SSLVPN", "i16");
					createInstruT1("配置ASA", "i16-1");
						cmd = `
							webvpn
							 enable Outside
							 anyconnect image disk0:/anyconnect-win-4.5.pkg
							 anyconnect enable
							!
							ip local pool sslpool 172.16.1.100-172.16.1.200
							!
							access-list split standard permit 10.1.1.0 255.255.255.0
							!
							group-policy anyconnect internal
							group-policy anyconnect attributes
							 vpn-tunnel-protocol ssl-client ssl-clientless
							 split-tunnel-policy tunnelspecified
							 split-tunnel-network-list value split
							 address-pools value sslpool
							!
							aaa-server ISE protocol radius
							aaa-server ISE (Inside) host 10.1.100.241
							 key cisco
							!
							tunnel-group DefaultWEBVPNGroup general-attributes
							 authentication-server-group ISE
						`;
						createNetworkTxtMarkT1(cmd);

					createInstruT1("配置ISE", "i16-2");
						createInstruT2("配置授权结果", "i16-2-1");
							createConfigImgT2("ISE31/i16_2_1$1");

						createInstruT2("配置策略集", "i16-2-2");
							createConfigImgT2("ISE31/i16_2_2$1");
			</script>
		</div>
	</div>
</body>
</html>