<!DOCTYPE html>
<html lang="zh">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<link rel="shortcut icon" href="../../../img/f5.ico" />
	<title>F5-LTM基本原理</title>
	<script src="../../../js/js_css.js"></script>
	<script type="text/javascript">
		document.write(head.replace(/rootpath\//g, '../../../'));
	</script>
	<style type="text/css">
		#npath span, #snat span, #gw span
		{
			display: block;
			margin-top: 20px;
			font-size: 20px;
		}

		#npath div, #snat div, #gw div
		{
			float: left;
		}

		#npath div:nth-child(2)
		{
			width: 550px;
			margin-left: -120px;
			margin-top: 50px;
		}

		#snat div:nth-child(2)
		{
			width: 500px;
			margin-left: -120px;
			margin-top: 50px;
		}


	</style>
</head>
<body>
	<div class="container-fluid">
		<script type="text/javascript">
			createNavigation(tree_ltm_basic, '../../../');
		</script>
		
		<div id="divCommand">
			<script type="text/javascript">
				createInstruT0("LTM基本概念","i1");
						createInstruT2("Node");
							createInstruAllTopT2("‘某台服务器（物理/虚拟）。，一般用IP地址标识");


						createInstruT2("<br />Pool");
							createInstruAllTopT2("一个或多个pool member的逻辑分组，‘一个pool代表一项应用。");
							createInstruAllTopT2("pool member一般用IP:端口号标识，如：10.1.1.11:80");
							createInstruAllTopT2("负载均衡方式在pool中配置");


						createInstruT2("<br />Virtual Server");
							createInstruAllTopT2("‘由IP地址和端口号组合而成，用于监听客户端的请求。，只有端口号，不区分TCP/UDP");
							createInstruAllTopT2("通常会引导流量到后台的应用pool池，并将目的地址和端口号转换为pool member地址和端口（源地址和端口不变）");
							createInstruAllTopT2("多个virtual server可以关联多个pool");

				createInstruT0("<br />组网方案","i2");
					createInstruT1("旁挂（单壁）部署","i2-1");
						createInstruT2("三角传输（nPath）模式","i2-1-1");
							var txt = `
								<div class="divConfigImgT2" id="npath">
									<div>
										<img src="config_img/ltm_basic/npath.png">
									</div>

									<div>
										<span>BGP-IP LTM进行请求转发时，只改变数据包的目的MAC地址</span>
										<span>每台服务器上需要配置loopback接口，与LTM上的虚拟服务器IP地址相同，服务器需要将应用绑定在该lookback接口上</span>
									</div>

									<div>
										<span>　</span>
										<span>此方案为最原始方案，几乎不使用</span>
										<span>在一个典型的HTTP应用网站中，上传和下载的比例超过1:10（如视频网站），用户提交很少量的请求，服务器就可返回大量数据，可以采用此方案</span>
										<span>主要问题为服务器配置复杂，且流量只有请求经过LTM，造成来回路径不一致，增加了排错管理等问题的复杂性</span>
									</div>
								</div>
							`;
							document.writeln(txt);

						document.write("<br style='clear:both' /><br /><br />")
						createInstruT2("SNAT模式","i2-1-2");
							var txt = `
								<div class="divConfigImgT2" id="snat">
									<div>
										<img src="config_img/ltm_basic/SNAT.png">
									</div>

									<div>
										<span>SNAT模式一般只用于现有网络结构无法改变的环境</span>
									</div>

									<div>
										<span>　</span>
										<span>由于改变了服务器接收到请求的源地址，不利于对源地址进行统计审计等需要真实原地址的应用</span>
										<span>可以在LTM设置相应策略，把请求的原始地址加入HTTP头部中的一个字段中</span>
									</div>
								</div>
							`;
							document.writeln(txt);

						document.write("<br style='clear:both' /><br /><br />")
						createInstruT2("网关模式","i2-1-3");
							var txt = `
								<div class="divConfigImgT2" id="gw">
									<div>
										<img src="config_img/ltm_basic/GW.png">
									</div>

									<div>
										<span>服务器的网关改为LTM的地址即可</span>
										<span>该方案是结合上述两方案而成方案，对网络的影响最小</span>
									</div>

									<div>
										<span>　</span>
										<span>该方案最不可靠的方法，因为服务器的所有流量均经过LTM，服务器上会有不需要负载均衡的流量（如管理流量），会带来大量问题</span>
									</div>
								</div>
							`;
							document.writeln(txt);
			</script>
			<div id="guide-icon">
				<div>
					<span class="open"></span>
					<span class="open"></span>
					<span class="open"></span>
				</div>
			</div>
		</div>
	</div>

	<script type="text/javascript">
		document.write(bottom.replace(/rootpath\//g, '../../../'));
	</script>
</body>
</html>